openapi: 3.0.0
info:
  description: This is a simplified Esquire Rest API for an inital sandbox environment.
  license:
    name: Apache-2.0
    url: https://www.apache.org/licenses/LICENSE-2.0.html
  title: Esquire Frameworks(tm) sandbox API
  version: 1.0.0
servers:
- url: localhost
tags:
- description: Everything you need to browse Esquire tree
  name: esquire
paths:
  /esq:
    get:
      description: Retrieve list of child tree nodes for the node
      operationId: esquire
      parameters:
      - description: parent node id or missed to obtain root nodes
        explode: true
        in: query
        name: id
        required: false
        schema:
          type: string
        style: form
      - description: number of nodes to skip
        explode: true
        in: query
        name: skip
        required: false
        schema:
          format: int32
          type: integer
        style: form
      - description: number of nodes to obtain
        explode: true
        in: query
        name: take
        required: false
        schema:
          format: int32
          type: integer
        style: form
      responses:
        "200":
          content:
            application/json:
              schema:
                items:
                  $ref: "#/components/schemas/EsqTreeNode"
                type: array
          description: successful operation
        "405":
          description: Invalid input
      summary: Retrieve list of tree nodes
      tags:
      - esquire
      x-eov-operation-handler: controllers/EsquireController
  /esq-path:
    get:
      description: Retrieve a path of a node (a location where a node located in the
        tree)
      operationId: esquirePath
      parameters:
      - description: a node id
        explode: true
        in: query
        name: id
        required: true
        schema:
          type: string
        style: form
      responses:
        "200":
          content:
            application/json:
              schema:
                items:
                  type: string
                type: array
          description: successful operation
        "405":
          description: Invalid input
      summary: Retrieve a path of a node
      tags:
      - esquire
      x-eov-operation-handler: controllers/EsquireController
  /esq-cmd:
    get:
      description: "Open interface to call a specific command, default cmd is 'details'\
        \ to obtain properties on an entity by its id"
      operationId: esquireCmd
      parameters:
      - description: an entity type
        explode: true
        in: query
        name: kind
        required: true
        schema:
          format: int32
          type: integer
        style: form
      - description: "An id of node or entity, depends on command context"
        explode: true
        in: query
        name: id
        required: true
        schema:
          type: string
        style: form
      - description: "a command to process , default 'details'"
        explode: true
        in: query
        name: cmd
        required: false
        schema:
          default: details
          type: string
        style: form
      responses:
        "200":
          content:
            application/json:
              schema:
                type: object
          description: successful operation
        "405":
          description: Invalid input
      summary: Generic esquire command
      tags:
      - esquire
      x-eov-operation-handler: controllers/EsquireController
  /esq-enode:
    get:
      description: Find a node corresponding to the entity's id or name + kind
      operationId: esquireEntityNode
      parameters:
      - description: an entity type
        explode: true
        in: query
        name: kind
        required: true
        schema:
          format: int32
          type: integer
        style: form
      - description: an entity id
        explode: true
        in: query
        name: id
        required: false
        schema:
          type: string
        style: form
      - description: an entity name
        explode: true
        in: query
        name: name
        required: false
        schema:
          type: string
        style: form
      responses:
        "200":
          content:
            application/json:
              schema:
                items:
                  $ref: "#/components/schemas/EsqTreeNode"
                type: array
          description: successful operation
        "405":
          description: Invalid input
      summary: Find an entity node
      tags:
      - esquire
      x-eov-operation-handler: controllers/EsquireController
  /esq-dict:
    get:
      description: Obtain a dictionary of an entity by its kind
      operationId: esquireDictionary
      parameters:
      - description: an entity kind
        explode: true
        in: query
        name: kind
        required: false
        schema:
          format: int32
          type: integer
        style: form
      responses:
        "200":
          content:
            application/json:
              schema:
                items:
                  $ref: "#/components/schemas/EsqEntityLayer"
                type: array
          description: successful operation
        "405":
          description: Invalid input
      summary: Obtain a dictionary of an entity
      tags:
      - esquire
      x-eov-operation-handler: controllers/EsquireController
components:
  schemas:
    EsqTreeNode:
      description: A node with all information for tree navigation
      example:
        path:
        - root
        - Pokemons
        linkId: Pikachu
        level: 2
        kind: 13
        name: Pikachu
        entityId: Pikachu
        id: Pikachu
        treeFlags: b
        moreRemaining: false
        parentId: Pokemons
        statusCode: 0
        desc: Yellow Electric Mouse Pok�mon
      properties:
        id:
          description: node id
          example: Pikachu
          type: string
        parentId:
          description: Parent node id
          example: Pokemons
          type: string
        linkId:
          description: "For shortcut nodes, reference to the origin node"
          example: Pikachu
          type: string
        name:
          description: Node name
          example: Pikachu
          type: string
        kind:
          description: "Node type, odd types are 'short cuts' a link node referencing\
            \ to origin one"
          example: 13
          format: int32
          type: number
        entityId:
          description: Entity id (it can be different from node id)
          example: Pikachu
          type: string
        treeFlags:
          description: "Flags defining tree/view list node behavior, BTb flags"
          example: b
          type: string
        statusCode:
          description: "Node Status Code, (0)ok (1)deleted (2)locked, (3)checked (4)question"
          enum:
          - 0
          - 1
          - 2
          - 3
          - 4
          example: 0
          format: int32
          type: integer
        moreRemaining:
          description: Indicates when more nodes left to retrieve
          example: false
          type: boolean
        level:
          description: Tree level of node
          example: 2
          format: int32
          type: integer
        path:
          description: Node path on the tree
          example:
          - root
          - Pokemons
          items:
            type: string
          type: array
        desc:
          description: Node description
          example: Yellow Electric Mouse Pok�mon
          type: string
      title: Tree Node
      type: object
      xml:
        name: EsqTreeNode
    EsqEntityLayer:
      description: An UI layer (or tab) aggregating a set of entity fields
      example:
        title: Generic
        fields:
        - nullable: false
          name: hight
          tooltip: Pokemon height in meters
          nullmeaning: nullmeaning
          format: format
          readwrite: 1
          sort: 3
          label: Hight
          type: string
          listvalues:
          - listvalues
          - listvalues
          validation: "^[Z0-9]+$"
          layer: 1
        - nullable: false
          name: hight
          tooltip: Pokemon height in meters
          nullmeaning: nullmeaning
          format: format
          readwrite: 1
          sort: 3
          label: Hight
          type: string
          listvalues:
          - listvalues
          - listvalues
          validation: "^[Z0-9]+$"
          layer: 1
      properties:
        title:
          description: a layer heading
          example: Generic
          type: string
        fields:
          description: set of entity field definitions
          items:
            $ref: "#/components/schemas/EsqEntityField"
          type: array
      title: Tree entity details layer
      type: object
    EsqEntityField:
      description: Tree entity field metadata
      example:
        nullable: false
        name: hight
        tooltip: Pokemon height in meters
        nullmeaning: nullmeaning
        format: format
        readwrite: 1
        sort: 3
        label: Hight
        type: string
        listvalues:
        - listvalues
        - listvalues
        validation: "^[Z0-9]+$"
        layer: 1
      properties:
        name:
          description: name of the field
          example: hight
          type: string
        sort:
          description: position in the sorting order
          example: 3
          format: int32
          type: number
        label:
          description: GUI field label
          example: Hight
          type: string
        type:
          description: Type of field data
          enum:
          - string
          - flag
          - integer
          - number
          - datetime
          - tablist
          - tabstring
          - href
          - image
          example: string
          type: string
        tooltip:
          description: GUI tooltip over the field
          example: Pokemon height in meters
          type: string
        listvalues:
          description: possible values in dropdown list UI element
          items:
            type: string
          type: array
        nullable:
          description: Determines whether the field value can be null
          example: false
          type: boolean
        nullmeaning:
          description: a meaning of null value for UI representation
          type: string
        validation:
          description: a validation regex for UI input
          example: "^[Z0-9]+$"
          type: string
        layer:
          description: an UI layer of the filed
          example: 1
          format: int32
          type: number
        readwrite:
          description: A bitmap (0)hidden (1)view (3)full
          enum:
          - 0
          - 1
          - 3
          example: 1
          format: int32
          type: number
        format:
          description: "For tablist field - a kind of entities represented in the\
            \ list; for string - max length; for integer, number, datetime- format"
          type: string
      title: Tree entity field definition
      type: object
